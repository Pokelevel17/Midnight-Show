<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Midnight Swim</title>
<style>
html,body{margin:0;height:100%;background:#000;overflow:hidden;font-family:"Helvetica Neue",Arial,sans-serif;color:#fff;}
#video-container{position:fixed;inset:0;background:#000;z-index:1;}
video{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;}
.bumper{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#000;color:#fff;text-align:center;opacity:1;transition:opacity 0.5s ease;z-index:2;pointer-events:none;text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000;}
.bumper.hide{opacity:0;}
.bumper h1{font-size:40px;margin:0;text-transform:uppercase;}
.bumper p{margin-top:8px;font-size:16px;opacity:0.85;}
.title{position:absolute;top:16px;left:20px;z-index:3;text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000;}
.title h1{font-size:28px;margin:0;text-transform:uppercase;letter-spacing:2px;}
.now-playing{margin-top:4px;font-size:14px;opacity:0.85;}
.next-playing{position:absolute;bottom:20px;left:20px;font-size:13px;opacity:0.75;text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000;z-index:3;}
</style>
</head>
<body>
<div id="video-container">
  <video id="video" autoplay playsinline></video>
</div>

<div class="bumper" id="bumper">
  <h1 id="bumpLine">PLEASE STAND BY</h1>
  <p id="bumpSub">MIDNIGHT SWIM</p>
</div>

<div class="title">
  <h1>MIDNIGHT SWIM</h1>
  <div class="now-playing" id="nowText">Loading lineup...</div>
</div>
<div class="next-playing" id="nextText"></div>

<script>
const bumpers = [
  {line:"PLEASE STAND BY", sub:"transmission will resume shortly"},
  {line:"INTERMISSION", sub:"take a break — we’ll be right back"},
  {line:"NO SIGNAL", sub:"please stand by"},
  {line:"THANK YOU", sub:"for staying up this late"}
];

// Add your Dropbox MP4 links (use ?raw=1 at the end)
let playlist = [
  {url:"https://www.dropbox.com/scl/fi/iqpmebwy6glrhup6d6h6q/Rick-and-Morty-S01E01-Pilot.mp4?rlkey=59bh0cneuzlnwr3zqmi2bmlh9&st=yvuj09al&?raw=1", title:"Video 1"},
  {url:"https://www.dropbox.com/s/def67890uvw/video2.mp4?raw=1", title:"Video 2"}
];

let current = 0;
let videoEl = document.getElementById("video");
let bumperEl = document.getElementById("bumper");

function showBumper(seconds=5, callback) {
  const b = bumpers[Math.floor(Math.random()*bumpers.length)];
  document.getElementById("bumpLine").textContent = b.line;
  document.getElementById("bumpSub").textContent = b.sub;
  bumperEl.classList.remove("hide");
  setTimeout(()=>{
    bumperEl.classList.add("hide");
    if(callback) callback();
  }, seconds*1000);
}

function playNext() {
  const curVideo = playlist[current];
  const nextVideo = playlist[(current+1)%playlist.length];

  document.getElementById("nowText").textContent = "Now Playing: " + curVideo.title;
  document.getElementById("nextText").textContent = "Next: " + nextVideo.title;

  videoEl.pause();
  videoEl.src = "";

  // Show bumper before video
  showBumper(5, () => {
    videoEl.src = curVideo.url;
    videoEl.currentTime = 0;
    videoEl.muted = false;
    videoEl.play().catch(() => console.warn("Autoplay failed"));

    // Last 5-second bumper
    videoEl.ontimeupdate = function() {
      if(videoEl.duration && videoEl.duration - videoEl.currentTime <=5){
        showBumper(5);
      }
    };

    videoEl.onended = function() {
      current = (current+1)%playlist.length;
      playNext();
    };
  });
}

// Optional: shuffle playlist
// playlist = playlist.sort(() => Math.random() - 0.5);

playNext();
</script>
</body>
</html>
