<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Midnight Show</title>
<style>
  body {
    margin: 0;
    background-color: black;
    color: white;
    font-family: "Courier New", monospace;
    overflow: hidden;
  }

  #player, #staticOverlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    object-fit: cover;
  }

  #staticOverlay {
    background: url('https://upload.wikimedia.org/wikipedia/commons/d/d7/Static.gif') center/cover;
    opacity: 1;
    transition: opacity 1s ease;
    z-index: 10;
  }

  .info {
    position: fixed;
    bottom: 30px;
    left: 30px;
    z-index: 11;
  }

  .logo {
    font-size: 2em;
    font-weight: bold;
    border: 2px solid white;
    padding: 10px;
    display: inline-block;
  }

  .nowPlaying {
    margin-top: 10px;
    font-size: 1em;
    border: 1px solid white;
    padding: 5px 10px;
    display: inline-block;
  }
</style>
</head>
<body>

<div id="player"></div>
<div id="staticOverlay"></div>

<div class="info">
  <div class="logo">ADULT CHANNEL</div>
  <div class="nowPlaying" id="nowPlaying">Loading...</div>
</div>

<script>
async function loadVideos() {
  const res = await fetch('Videos.json');
  const videos = await res.json();
  return videos;
}

function getRandomVideo(videos) {
  return videos[Math.floor(Math.random() * videos.length)];
}

let player;
let currentVideo = null;
let staticOverlay = document.getElementById("staticOverlay");
let nowPlaying = document.getElementById("nowPlaying");

function showStatic(fadeIn = true) {
  staticOverlay.style.opacity = fadeIn ? "1" : "0";
}

function playRandomVideo(videos) {
  const video = getRandomVideo(videos);
  currentVideo = video;
  nowPlaying.textContent = "Now Playing: " + video.title;

  // Load new YouTube embed
  document.getElementById('player').innerHTML = `
    <iframe 
      id="ytplayer"
      src="https://www.youtube.com/embed/${video.id}?autoplay=1&controls=0&modestbranding=1&rel=0&fs=0&showinfo=0&iv_load_policy=3&mute=0"
      frameborder="0"
      allow="autoplay; encrypted-media"
      allowfullscreen="false"
      style="width:100%;height:100%;border:0;">
    </iframe>
  `;

  // Fade static in and out
  showStatic(true);
  setTimeout(() => showStatic(false), 1000);

  // Next video after 5 minutes (or whatever length)
  setTimeout(() => {
    showStatic(true);
    setTimeout(() => playRandomVideo(videos), 1000);
  }, 5 * 60 * 1000);
}

(async () => {
  const videos = await loadVideos();
  playRandomVideo(videos);
})();
</script>
</body>
</html>
